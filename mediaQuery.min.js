
/* jQuery plugin and polyfill to mediaQuery based classes to any element */
/* https://github.com/jameswestgate/mediaQuery
/* Copyright James Westgate 2013 */
/* Dual licensed under the MIT and GPL licenses */

(function(){function t(a,b,d,n){function f(a){return a.replace(/(url\()['"]?([^\/\)'"][^:\)'"]+)['"]?(\))/g,"$1"+b+"$2$3")}var l=a.match(/@media[^\{]+\{([^\{\}]*\{[^\}\{]*\})+/gi),c=l&&l.length||0;b=b.substring(0,b.lastIndexOf("/"));var h=!c&&d,m,g,e;b.length&&(b+="/");if(n||h)c=1;for(var j=0;j<c;j++){n?(m=n.media,p.push(n)):h?(m=d,p.push(f(a))):(m=l[j].match(/@media *([^\{]+)\{([\S\s]+?)$/)&&RegExp.$1,p.push(RegExp.$2&&f(RegExp.$2)));m=m.split(",");e=m.length;for(var k=0;k<e;k++)g=m[k],g={media:g.split("(")[0].match(/(only\s+)?([a-zA-Z]+)\s?/)&&
RegExp.$2||"all",rules:p.length-1,hasquery:-1<g.indexOf("("),minw:g.match(/\(min\-width:[\s]*([\s]*[0-9\.]+)(px|em)[\s]*\)/)&&parseFloat(RegExp.$1)+(RegExp.$2||""),maxw:g.match(/\(max\-width:[\s]*([\s]*[0-9\.]+)(px|em)[\s]*\)/)&&parseFloat(RegExp.$1)+(RegExp.$2||"")},g.minw&&(g.minw=parseFloat(g.minw)),g.maxw&&(g.maxw=parseFloat(g.maxw)),x.push(g)}r()}function r(a){var b=(new Date).getTime();if(a&&y&&b-y<B)clearTimeout(C),C=setTimeout(r,B);else{y=b;a=h.clientWidth;var c="CSS1Compat"===d.compatMode&&
a||d.body.clientWidth||a,b={},n=v[v.length-1];a=0;for(var f=x.length;a<f;a++){var l=x[a],j=l.minw,k=l.maxw,m=null===j,g=null===k,e=p[l.rules];e._listeners&&(e.matches=!1);if(!l.hasquery||(!m||!g)&&(m||c>=j)&&(g||c<=k))b[l.media]||(b[l.media]=[]),e._listeners?e.matches=!0:b[l.media].push(e)}a=0;for(f=u.length;a<f;a++)u[a]&&u[a].parentNode===w&&w.removeChild(u[a]);for(a in b)f=d.createElement("style"),e=b[a].join("\n"),f.type="text/css",f.media=a,w.insertBefore(f,n.nextSibling),f.styleSheet?f.styleSheet.cssText=
e:f.appendChild(d.createTextNode(e)),u.push(f);a=0;for(f=p.length;a<f;a++)if(e=p[a],e._listeners&&e.matches!=e._matches){e._matches=e.matches;b=0;for(n=e._listeners.length;b<n;b++)if(e._listeners[b])e._listeners[b](e)}}}function j(){r(!0)}if(!window.matchMedia||!window.matchMedia("only all").matches){var d=window.document,h=d.documentElement,x=[],p=[],u=[],B=30,w=d.getElementsByTagName("head")[0]||h,D=d.getElementsByTagName("base")[0],v=w.getElementsByTagName("link"),c;c=h.firstElementChild||h.firstChild;
var s=d.createElement("body"),k=d.createElement("div");window.matchMedia=function(a){var b,c=[];b={matches:!1,media:a,addListener:function(a){"function"===typeof a&&c.push(a)},removeListener:function(a){for(var b=0,d=c.length;b<d;b++)c[b]===a&&delete c[b]}};b._listeners=c;b._matches=!1;t(a,"","",b);return b};var y,C;k.id="mq-test-1";k.style.cssText="position:absolute;top:-100em";s.appendChild(k);k.innerHTML="&shy;<style>@media only all {#mq-test-1 { width: 42px; }}</style>";h.insertBefore(s,c);c=
42==k.offsetWidth;h.removeChild(s);if(c)r();else for(var s={},q,z=0,E=v.length;z<E;z++)if(q=v[z],c=q.href,k=q.media,c&&(q.rel&&"stylesheet"===q.rel.toLowerCase()&&!s[c])&&(s[c]=!0,!D&&!/^([a-zA-Z:]*\/\/)/.test(c)||c.replace(RegExp.$1,"").split("/")[0]===window.location.host)){q=c;var A=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");A.open("GET",q,!1);A.send();t(A.responseText,c,k)}window.addEventListener?window.addEventListener("resize",j,!1):window.attachEvent&&window.attachEvent("onresize",
j)}})();(function(t){t.fn.mediaQuery=function(r){var j=t(this),d;for(d in r){var h=window.matchMedia(queries[d]);(function(d){h.addListener(function(h){h.matches?j.addClass(d):j.removeClass(d)});h.matches?j.addClass(d):j.removeClass(d)})(d)}return this}})(jQuery);
