
/* jQuery plugin and polyfill to mediaQuery based classes to any element */
/* https://github.com/jameswestgate/mediaQuery
/* Copyright James Westgate 2013 */
/* Dual licensed under the MIT and GPL licenses */

(function(){function v(a,b,e,q){function f(a){return a.replace(/(url\()['"]?([^\/\)'"][^:\)'"]+)['"]?(\))/g,"$1"+b+"$2$3")}var l=a.match(/@media[^\{]+\{([^\{\}]*\{[^\}\{]*\})+/gi),c=l&&l.length||0;b=b.substring(0,b.lastIndexOf("/"));var h=!c&&e,m,g,d;b.length&&(b+="/");if(q||h)c=1;for(var p=0;p<c;p++){q?(m=q.media,j.push(q)):h?(m=e,j.push(f(a))):(m=l[p].match(/@media *([^\{]+)\{([\S\s]+?)$/)&&RegExp.$1,j.push(RegExp.$2&&f(RegExp.$2)));m=m.split(",");d=m.length;for(var k=0;k<d;k++)g=m[k],g={media:g.split("(")[0].match(/(only\s+)?([a-zA-Z]+)\s?/)&&
RegExp.$2||"all",rules:j.length-1,hasquery:-1<g.indexOf("("),minw:g.match(/\(min\-width:[\s]*([\s]*[0-9\.]+)(px|em)[\s]*\)/)&&parseFloat(RegExp.$1)+(RegExp.$2||""),maxw:g.match(/\(max\-width:[\s]*([\s]*[0-9\.]+)(px|em)[\s]*\)/)&&parseFloat(RegExp.$1)+(RegExp.$2||"")},g.minw&&(g.minw=parseFloat(g.minw)),g.maxw&&(g.maxw=parseFloat(g.maxw)),r.push(g)}s()}function s(a){var b=(new Date).getTime();if(a&&y&&b-y<B)clearTimeout(C),C=setTimeout(s,B);else{y=b;a=h.clientWidth;var c="CSS1Compat"===e.compatMode&&
a||e.body.clientWidth||a,b={},q=w[w.length-1];a=0;for(var f=r.length;a<f;a++){var l=r[a],k=l.minw,n=l.maxw,m=null===k,g=null===n,d=j[l.rules];d._listeners&&(d.matches=!1);if(!l.hasquery||(!m||!g)&&(m||c>=k)&&(g||c<=n))b[l.media]||(b[l.media]=[]),d._listeners?d.matches=!0:b[l.media].push(d)}a=0;for(f=p.length;a<f;a++)p[a]&&p[a].parentNode===x&&x.removeChild(p[a]);for(a in b)f=e.createElement("style"),d=b[a].join("\n"),f.type="text/css",f.media=a,x.insertBefore(f,q.nextSibling),f.styleSheet?f.styleSheet.cssText=
d:f.appendChild(e.createTextNode(d)),p.push(f);a=0;for(f=j.length;a<f;a++)if(d=j[a],d._listeners&&d.matches!=d._matches){d._matches=d.matches;b=0;for(q=d._listeners.length;b<q;b++)if(d._listeners[b])d._listeners[b](d)}}}function k(){s(!0)}if(!window.matchMedia||!window.matchMedia("only all").matches){var e=window.document,h=e.documentElement,r=[],j=[],p=[],B=30,x=e.getElementsByTagName("head")[0]||h,D=e.getElementsByTagName("base")[0],w=x.getElementsByTagName("link"),c;c=h.firstElementChild||h.firstChild;
var u=e.createElement("body"),n=e.createElement("div");window.matchMedia=function(a){var b,c=[];b={matches:!1,media:a,addListener:function(a){"function"===typeof a&&c.push(a)},removeListener:function(a){for(var b=0,e=c.length;b<e;b++)c[b]===a&&delete c[b]}};b._listeners=c;b._matches=!1;v(a,"","",b);return b};var y,C;n.id="mq-test-1";n.style.cssText="position:absolute;top:-100em";u.appendChild(n);n.innerHTML="&shy;<style>@media only all {#mq-test-1 { width: 42px; }}</style>";h.insertBefore(u,c);c=
42==n.offsetWidth;h.removeChild(u);if(c)s();else for(var u={},t,z=0,E=w.length;z<E;z++)if(t=w[z],c=t.href,n=t.media,c&&(t.rel&&"stylesheet"===t.rel.toLowerCase()&&!u[c])&&(u[c]=!0,!D&&!/^([a-zA-Z:]*\/\/)/.test(c)||c.replace(RegExp.$1,"").split("/")[0]===window.location.host)){t=c;var A=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");A.open("GET",t,!1);A.send();v(A.responseText,c,n)}window.addEventListener?window.addEventListener("resize",k,!1):window.attachEvent&&window.attachEvent("onresize",
k)}})();(function(v){v.fn.mediaQuery=function(s,k){var e=v(this),h;for(h in s){var r=window.matchMedia(s[h]);(function(j){r.addListener(function(h){h.matches?e.addClass(j):e.removeClass(j);k&&k(h,j)});r.matches?e.addClass(j):e.removeClass(j);k&&k(r,j)})(h)}return this}})(jQuery);

